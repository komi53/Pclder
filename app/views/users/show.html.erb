<div class="row">
  <div class="offset-md-1" style="margin-right: 20px;">
    <%= attachment_image_tag @user, :profile_image, class: "rounded-circle border border-white", format: 'jpeg', fallback: "no_image.jpg",:size =>'200x200' %>
  </div>
  <div class="col-md-5" style="padding-top: 60px;">
    <span style="font-size:24px;"><%= @user.name %>@<%= @user.at_name %></span>
    <% if current_user == @user %>
       <%= link_to 'プロフィール編集', edit_user_path(@user.id) %>
    <% end %><br>
    <span><%= @user.introduction %></span>
  </div>
</div>
<div class="row">
  <div class="follow-count">
    <%= link_to user_follows_path(@user.id), class: "link" do %>
      フォロー数：<%= @user.follower.count %>
    <% end %>
    <%= link_to user_followers_path(@user.id), class: "link" do %>
      フォロワー数：<%= @user.followed.count %>
    <% end %>
    <% if user_signed_in? %>
      <% if current_user != @user %>
        <% if current_user.following?(@user) %>
          <%= link_to 'フォロー外す', user_relationships_path(@user.id), method: :delete, class: "btn btn-primary" %>
        <% else %>
          <%= link_to 'フォローする', user_relationships_path(@user.id), method: :POST, class: "btn btn-success" %>
        <% end %>
        <%= link_to 'メッセージを送る', chat_path(@user.id), class: "btn btn-outline-primary" %>
      <% end %>
    <% end %>
  </div>
</div>
</div>
 <div class="container">
    <div class="row align-items-strech">
     <% @user.posts.reverse_each do |post| %>
      <div class="col-md-4">
        <div class="post-grid">
          <div class="post-image">
            <%= link_to  post_path(post.id) do %>
              <%= attachment_image_tag post, :post_image, format: 'jpeg', fallback: "no_image.jpg" %>
            <% end %>
          </div>
          <div class="post-content">
            <h3 class="title"><%= link_to post.title, post_path(post.id) %></h3>
            <div class="post-user">
              <span><%= post.pc_introduction %></span></br>
              <%= link_to  user_path(post.user_id) do %>
                <%= attachment_image_tag post.user, :profile_image, class: "rounded-circle border border-dark", format: 'jpeg', fallback: "no_image.jpg",:size =>'40x40' %>
              <% end %>
              <span><%= post.user.name %>@<%= post.user.at_name %></span></br>
              <% if user_signed_in? %>
                <% if post.favorited_by?(current_user) %>
                  <%= link_to post_favorites_path(post), method: :delete do %>
                    <i class="fa fa-heart" aria-hidden="true" style="color: red;"></i>
                    <%= post.favorites.count %>
                  <% end %>
                <% else %>
                  <%= link_to post_favorites_path(post), method: :post do %>
                    <i class="far fa-heart" aria-hidden="true"></i>
                    <%= post.favorites.count %>
                  <% end %>
                <% end %>
              <% else %>
                <%= link_to new_user_session_path do %>
                  <i class="far fa-heart" aria-hidden="true"></i>
                  <%= post.favorites.count %>
                <% end %>
              <% end %>
              |
              <span><i class="fa fa-comment"></i><%= link_to "#{post.post_comments.count}", post_path(post.id) %></span>
              |
              <span><i class="fa fa-tags"></i>
                <% post.tag_list.first(3).each do |tag| %>
                  <%= link_to tag, posts_path(tag_name: tag), class: "badge badge-success p-1 badge-tag",data: {"turbolinks" => false} %>
                <% end %>
              </span>|
              <%= link_to '', "https://twitter.com/share?url=#{request.url}/#{post.id}&text=#{ post.title }/&hashtags=Pclder", class: 'fab fa-twitter fa-lg', data: { show_count: false }, title: 'Twitter', target: '_blank', style: "text-decoration: none;" %>
              <span>
                <%= link_to "https://line.me/R/msg/text/?#{request.url}/#{post.id}" do %>
                  <div class="line-it-button" data-lang="ja" data-type="share-b" data-color="default" data-size="small" data-count="false" style="display: none; "></div>
                <% end %>
              </span>
            </div>
          </div>
        </div>
      </div>
      </hr>
    <% end %>